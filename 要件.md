 # ゲーム要件定義書

## 1. 概要

このドキュメントは、「ふくふくにゃんこ★レース大会」のゲーム仕様を定義するものです。
既存のタイマーベースのスコアアタック形式から、ゴールを目指すサイドスクロールのレース形式へと変更します。

## 2. ゲームフロー

1.  **メニュー画面**: プレイヤーは使用するキャラクターを選択します。
2.  **ゲームプレイ**: 
    *   レースが開始されると、カメラはプレイヤーキャラクターを追従し、ステージが横にスクロールします。
    *   プレイヤーとNPCは、設定されたゴール地点を目指して競走します。
3.  **ゲーム終了**: 
    *   いずれかのキャラクター（プレイヤーまたはNPC）がゴールラインに到達した時点で、レースは終了となります。
4.  **結果表示**: 
    *   レースの勝者（ゴールに一番乗りしたキャラクター）の名前と、プレイヤーの順位が表示されます。

## 3. コアメカニクス

### 3.1. カメラとスクロール

*   **カメラ**: ゲーム画面は、常にプレイヤーキャラクターを中心に表示するように追従します。
*   **ワールド**: キャンバスの横幅よりも長い、固定の横幅を持つ「ワールド」を定義します。カメラはこのワールド内を移動します。
*   **背景**: 背景もカメラの動きに合わせてスクロールします。可能であれば、複数の背景レイヤーを異なる速度でスクロールさせ、視差効果（パララックス）を生み出します。

### 3.2. ゴール判定

*   **ゴール地点**: ワールドの終端付近に、明確な「ゴールライン」のX座標を設定します。
*   **終了条件**: いずれかのキャラクターのX座標が、ゴールラインのX座標以上になった瞬間にゲーム終了と判定します。
*   **タイマー**: 従来の「残り時間」は廃止し、代わりにレース開始からの「経過時間」を記録・表示します。これは最終的なリザルトの一部となります。

### 3.3. ステージ構成

*   **障害物とアイテム**: 障害物とアイテムは、ワールド全体のゴールまでの道中に均等に配置されるように、生成ロジックを修正します。

## 4. UI（ユーザーインターフェース）

*   **レース中**: 
    *   経過時間を表示します。
    *   ゴールまでの距離や、現在の順位などを表示するプログレスバーを追加します。
*   **結果画面**: 
    *   「優勝：〇〇（キャラクター名）」のように、勝者を明確に表示します。
    *   プレイヤーの最終的な順位と、ゴールまでにかかった時間を表示します。
